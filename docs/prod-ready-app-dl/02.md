

# 1

# 深度学习驱动项目的有效规划

在本书的第一章，我们将介绍什么是**深度学习** ( **DL** )以及 DL 项目通常是如何进行的。这一章从 DL 的介绍开始，提供了一些关于它如何塑造我们日常生活的见解。然后，我们将通过描述 DL 项目的结构来转移我们的焦点。在整个章节中，我们将特别强调第一阶段，项目计划；您将学习一些关键概念，例如对业务目标的理解、如何定义适当的评估指标、利益相关者的识别、资源规划，以及**最低可行产品** ( **MVP** )和**全功能产品** ( **FFP** )之间的区别。在本章结束时，你应该能够构建一个清晰描述项目目标、里程碑、任务、资源分配及其时间表的 DL 项目行动手册。

在本章中，我们将讨论以下主要话题:

*   DL 是什么？
*   理解数字图书馆在我们日常生活中的作用
*   DL 项目概述
*   规划 DL 项目

# 技术要求

您可以从下面的 GitHub 链接下载本章的补充材料:

[https://github . com/packt publishing/Production-Ready-Applied-Deep-Learning/tree/main/Chapter _ 1](https://github.com/PacktPublishing/Production-Ready-Applied-Deep-Learning/tree/main/Chapter_1)

# 什么是 DL？

虽然数字图书馆的出现只有十年的时间，但它已经迅速开始在我们的日常生活中扮演重要的角色。在**人工智能** ( **AI** )领域，存在一套被归类为**机器学习** ( **ML** )的流行方法。通过从历史数据中提取有意义的模式，ML 的目标是建立一个模型，为新收集的数据做出明智的预测和决策。DL 是一种 ML 技术，它利用**人工神经网络** ( **ANNs** )来捕捉给定的模式。*图 1.1* 展示了始于 20 世纪 50 年代左右的人工智能进化的关键组成部分，艾伦·图灵(Alan Turing)与该领域的其他教父们一起进行了关于智能机器的讨论。虽然自人工智能出现以来，各种 ML 算法已经零星地被引入，但实际上该领域又花了几十年才开花结果。类似地，DL 成为主流也不过十年左右，因为这个领域的很多算法都需要庞大的计算能力。

![Figure 1.1 – A history of AI
](img/B18522_01_01.jpg)

图 1.1–人工智能的历史

如图*图 1.2* 所示，DL 的关键优势来自人工神经网络，它能够自动选择必要的特征。类似于人类大脑的构造方式，人工神经系统也是由被称为 T21 神经元的组件组成的。一组神经元形成一个**层**，多个层链接在一起形成一个**网络**。这种架构可以理解为嵌套指令的多步。当输入数据通过网络时，每个神经元提取不同的信息，模型被训练为选择与给定任务最相关的特征。考虑到神经元作为模式识别的构建模块的作用，更深的网络通常会带来更好的性能，因为它们可以更好地学习细节:

![Figure 1.2 – The difference between ML and DL
](img/B18522_01_02.jpg)

图 1.2–ML 和 DL 之间的区别

典型的 ML 技术要求手动选择特性，而 DL 学会自己选择重要的特性。因此，它可能适用于更广泛的问题。然而，这种优势不是免费的。为了正确地训练 DL 模型，用于训练的数据集需要足够大和多样化，这导致训练时间增加。有趣的是，**图形处理单元** ( **GPU** )在减少训练时间方面发挥了主要作用。虽然**中央处理器** ( **CPU** )通过其更广泛的指令集展示了其在执行复杂计算方面的有效性，但 GPU 更适合处理更简单但更大的计算，因为其具有巨大的并行性。通过利用 DL 模型非常依赖的矩阵乘法的这种优势，GPU 已经成为 DL 中的一个关键组件。

由于我们仍然处于 AI 时代的早期阶段，芯片技术正在不断发展，目前还不清楚这些技术在未来会如何变化。值得一提的是，新设计既来自初创企业，也来自大型科技公司。这场正在进行的竞赛清楚地表明，越来越多基于人工智能的产品和服务将被推出。考虑到市场和工作机会的增长，我们认为这是了解 DL 的大好时机。

要记住的事情

a.DL 是一种利用 ann 进行模式识别的 ML 技术。

b.DL 非常灵活，因为它可以在整个训练过程中为给定的任务自动选择最相关的特性。

c.GPU 凭借其巨大的并行性，可以加速 DL 模型训练。

现在我们已经从高层次上理解了 DL 是什么，我们将在下一节描述它如何塑造我们的日常生活。

# 了解 DL 在我们日常生活中的作用

通过利用 DL 的灵活性，研究人员在传统 ML 技术表现有限的领域取得了显著进展(参见*图 1.3* )。第一面旗帜已经插在**计算机视觉** ( **CV** )领域，用于数字识别和物体检测任务。然后，DL 已经被用于**自然语言处理** ( **NLP** )，显示了翻译和语音识别任务中有意义的进展。它还在**强化学习** ( **RL** )以及**生成建模**中展示了其有效性。

本章*延伸阅读*部分中链接的论文列表总结了 DL 的常见使用案例。

下图显示了 DL 的各种应用:

![Figure 1.3 – Applications of DL
](img/B18522_01_03.jpg)

图 1.3–DL 的应用

然而，将 DL 集成到现有的技术基础设施中并不是一件容易的事情；困难可能来自各个方面，包括但不限于预算、时间以及人才。因此，对 DL 的透彻理解已经成为管理 DL 项目的人的一项基本技能:项目经理、技术领导以及高管。此外，这一快速增长领域的知识将使他们能够在特定的垂直行业和整个组织中找到未来的机会，因为从事人工智能项目的人会积极收集新知识，以获得创新和竞争优势。总的来说，深入了解 DL 管道和开发生产就绪型产品，可以让经理有效地避免众所周知的陷阱，从而更好地执行项目。

不幸的是，DL 项目还没有达到即插即用的状态。在许多情况下，它们涉及大量的研究和调整阶段，这可能会很快耗尽可用的资源。最重要的是，我们注意到许多公司努力从**概念验证**转向生产，因为关键决策是由少数对项目需求和 DL 管道了解有限的人做出的。也就是说，我们的书旨在提供一个 DL 项目的完整图景；我们将从项目规划开始，然后讨论如何开发 MVP 和 FFP，如何利用云服务进行扩展，最后，如何向目标用户交付产品。

要记住的事情

a.DL 已经应用于各种领域的许多问题，包括但不限于 CV、NLP、RL 和生成建模。

b.对 DL 的深入理解对于那些领导 DL 项目的人来说是至关重要的，不管他们的职位或背景如何。

c.这本书通过描述 DL 项目从项目规划到部署是如何进行的，提供了一个 DL 项目的完整画面。

接下来，我们将进一步了解 DL 项目是如何构建的。

# DL 项目概述

虽然 DL 和其他软件工程项目有很多共同点，但是 DL 项目强调计划，因为对资源的广泛需求，主要来自模型的复杂性和涉及的大量数据。一般来说，DL 项目可以分为以下几个阶段:

1.  计划图编制
2.  构建 MVP
3.  建立常旅客计划
4.  部署和维护
5.  项目评估

在本节中，我们提供了这些阶段的高级概述。以下部分详细介绍了每个阶段。

## 项目规划

作为第一步，项目领导必须明确定义项目需要实现的目标，并了解能够影响项目或受项目影响的群体。评估指标需要被定义并达成一致，因为在项目评估过程中它们将被重新访问。然后，团队成员聚在一起讨论个人职责，并利用可用资源实现业务目标。这个过程自然会导致一个时间表，一个项目需要多长时间的估计。总的来说，项目计划应该产生一个叫做行动手册的文档，该文档包括对项目将如何执行和评估的详细描述。

## 构建最小可行产品

一旦每个人都清楚了方向,下一步就是建立一个 MVP，一个展示项目价值的目标可交付物的简单版本。这一阶段的另一个重要方面是通过遵循*快速失败，经常失败*的理念，理解项目的困难并拒绝具有更大风险或不太有希望的结果的路径。因此，数据科学家和工程师通常在开发环境中使用部分采样的数据集，并忽略无关紧要的优化。

## 打造全功能产品

一旦项目的可行性被 MVP 确认，就必须打包成 FFP。这个阶段的目标是完善 MVP，通过各种优化来构建一个生产就绪的可交付产品。在 DL 项目中，额外的数据准备技术被引入以提高输入数据的质量，或者模型管道被稍微扩充以获得更好的模型性能。此外，数据准备管道和模型训练管道可以迁移到云中，利用各种 web 服务来获得更高的吞吐量和质量。在这种情况下，整个管道通常使用不同的工具和服务重新实现。这本书聚焦于亚马逊网络服务，这是处理大量数据和昂贵计算的最流行的网络服务。

## 部署和维护

在许多情况下，部署设置不同于开发设置。因此，将 FFP 投入生产时，通常需要使用不同的工具。此外，部署可能会引入开发过程中看不到的问题，这些问题主要是由于有限的计算资源造成的。因此，许多工程师和科学家在这个阶段花费额外的时间来改善用户体验。大多数人认为部署是最后一步。但是，还有一步:保养。需要持续监控数据质量和模型性能，以便为目标用户提供稳定的服务。

## 项目评估

在最后一个阶段，即项目评估阶段，团队应该重温在项目规划期间进行的讨论，以评估项目是否已经成功实现。此外，需要记录项目的细节，并且必须讨论潜在的改进，以便可以更有效地实现下一个项目。

要记住的事情

a.DL 项目中的阶段分为项目规划、构建 MVP、构建 FFP、部署和维护以及项目评估。

b.在项目规划阶段，定义项目目标和评估标准，团队讨论个人责任、可用资源和项目时间表。

c.建立 MVP 的目的是理解项目的困难，拒绝那些带来更大风险或提供更少有希望的结果的路径。

d.FFP 是一个生产就绪的可交付产品，是 MVP 的优化版本。数据准备管道和模型训练管道可以迁移到云中，利用各种 web 服务来获得更高的吞吐量和质量。

e.部署设置通常提供有限的计算资源。在这种情况下，需要对系统进行调整，以便为目标用户提供稳定的服务。

f.项目完成后，团队需要重新审视时间表、分配的职责和业务需求，以评估项目是否成功。

在接下来的部分，我们将带你了解如何恰当地规划一个 DL 项目。

# 规划 DL 项目

每个项目都是从规划开始的。在整个规划过程中，需要清楚地定义项目的目的，关键成员应该彻底了解可以分配给项目的可用资源。一旦确定了团队成员和利益相关者，下一步就是讨论每个人的职责并为项目创建时间表。

这个阶段应该产生一个记录良好的项目剧本，该剧本精确地定义了业务目标以及如何评估项目。典型的行动手册包含关键交付物的概述、利益相关者列表、定义步骤和瓶颈的**甘特图**、职责定义、时间表和评估标准。对于高度复杂的项目，强烈建议遵循**项目管理知识体系** ( **PMBOK** )指南([https://www . PMI . org/PMBOK-Guide-standards/fundamental/PMBOK](https://www.pmi.org/pmbok-guide-standards/foundational/pmbok))并考虑每个知识领域(例如，集成管理、项目范围管理和时间管理)。当然，其他的项目管理框架也存在，比如**prince 2**([https://www.prince2.com/usa/what-is-prince2](https://www.prince2.com/usa/what-is-prince2))可以提供一个很好的起点。一旦剧本完成，每个利益相关者都必须检查和修改剧本，直到每个人都同意剧本的内容。

在现实生活中，许多人低估了计划的重要性。特别是在初创公司，工程师们渴望投入 MVP 开发，花最少的时间进行规划。然而，在 DL 项目中这样做尤其危险，因为培训过程会很快耗尽所有可用的资源。

## 定义目标和评估指标

规划的第一步是理解项目的目的。目标可能是开发新产品，提高现有服务的性能，或者节省运营成本。项目的动机自然有助于定义评估指标。

在 DL 项目的情况下，有两种类型的评估度量:与业务相关的度量和基于模型的度量。业务相关指标的一些例子如下:**转换率**、**点击率** ( **点击率**)、**生命周期价值**、**用户参与度测量**、**运营成本节约**、**投资回报** ( **ROI** )以及**收入**。这些通常用于广告、营销和产品推荐垂直市场。

另一方面，基于模型的度量标准包括**精确度**、**精确度**、**召回**、**F1-得分**、**等级精确度度量标准**、**平均绝对误差** ( **MAE** )、**均方误差** ( **MSE** )、**均方根误差**(**)RMSE 一般来说，可以在各种指标之间进行权衡。例如，如果满足延迟要求对项目来说更为重要，那么精确度的轻微下降是可以接受的。**

除了因项目而异的目标评估度量之外，还有大多数项目中常见的其他度量。这些是截止日期和资源使用情况。必须使用可用资源在某个日期之前达到目标状态。

目标和相应的评估指标需要公平。如果目标太难实现，项目成员可能会失去动力。如果评估的标准不正确，理解项目的影响就会变得困难。因此，建议与他人分享选定的评估指标，并认为这些指标对每个人都是公平的。

![Figure 1.4 – A sample playbook with the project description section filled out
](img/B18522_01_04.jpg)

图 1.4–填写了项目描述部分的行动手册示例

如*图 1.4* 所示，行动手册的第一部分以概述、技术方面的估计复杂性以及所需工具和框架的列表开始。接下来，它清楚地描述了项目的目标以及如何评估项目。

## 利益相关方识别

与术语利益相关者用于企业的方式相同，项目的利益相关者是指能够影响项目或受项目影响的个人或团体。利益相关者可以分为内部和外部两种类型。内部利益相关者是那些直接参与项目执行的人，而外部利益相关者可能在圈子之外，以间接的方式支持项目执行。

每个涉众在项目中有不同的角色。首先，我们来看看内部利益相关者。内部利益相关者是项目的主要驱动者。因此，他们紧密合作来处理和分析数据，开发模型，并构建可交付成果。*表 1.1* 列出了 DL 项目中常见的内部利益相关者:

![Table 1.1 – Common internal stakeholders for DL projects
](img/B18522_01_Table1.jpg)

表 1.1–DL 项目的常见内部利益相关者

另一方面，外部利益相关者经常扮演支持性的角色，比如为项目收集必要的数据，或者提供关于可交付成果的反馈。在*表 1.2* 中，我们描述了 DL 项目的一些常见外部利益相关方:

![Table 1.2 – Common external stakeholders for DL projects
](img/B18522_01_Table2.jpg)

表 1.2–DL 项目的常见外部利益相关方

行动手册的第二部分描述了利益相关方。如图*图 1.4* 所示，行动手册必须列出项目中的利益相关者及其职责。

## 任务组织

里程碑是指项目中发生重大事件的点。因此，有一组通向里程碑的需求。一旦满足了需求，就可以宣称已经达到了一个里程碑。项目规划中最重要的步骤之一是定义里程碑及其相关任务。通向目标的任务排序被称为**关键路径**。值得一提的是，任务不需要一直按顺序处理。对关键路径的理解是很重要的，因为它允许团队适当地对任务进行优先级排序，以确保项目的成功。

在这一步骤中，确定**努力水平** ( **LOE** )活动和支持活动也很关键，这是项目执行所需要的。在软件开发项目的情况下，LOE 活动包括附加的任务，比如建立 Git 存储库或者审查其他人的合并请求。下图(*图 1.5* )描述了 DL 项目的典型关键路径。如果基础项目包含不同的任务、需求、技术和所需的详细程度，那么它的结构也会不同:

![Figure 1.5 – A typical critical path for a DL project
](img/B18522_01_05.jpg)

图 1.5–DL 项目的典型关键路径

## 资源分配

对于一个 DL 项目，有两种主要的资源需要明确的资源分配:人力和计算资源。人力资源指的是将积极参与个人任务的员工。一般来说，他们在数据工程、数据科学、DevOps 或软件工程领域任职。当人们谈论人力资源时，他们通常只考虑人数。然而，个人拥有的知识和技能是其他关键因素。人力资源与项目开展的速度密切相关。

计算资源是指分配给项目的硬件和软件资源。不像典型的软件工程项目，如移动应用程序开发或网页开发，DL 项目需要大量的计算和大量的数据。加速开发过程的常见技术包括并行性或使用计算能力更强的机器。在某些情况下，需要在它们之间进行权衡，因为高计算能力的单台机器比低计算能力的多台机器成本更高。

总的来说，新颖的 DL 管道利用了灵活的无状态资源，例如具有容错代码的 AWS Spot 实例。除了硬件资源，还有一些框架和服务可以提供开箱即用的必要特性。如果必要的服务需要付费，重要的是理解它如何改变项目执行，以及如果团队决定在内部处理它，对人力资源的需求是什么。

在这一步中，需要将可用资源分配给每个任务。*图 1.6* 列出了上一节描述的任务，并描述了分配的资源，以及运营成本的估计。每项任务都有自己的风险等级指标。它是为一个三人小组设计的，这个小组在一个简单的 DL 项目中使用有限的计算资源，在几个 AWS **弹性计算云** ( **EC2** )实例上工作大约 4 到 6 个月。请注意，人力资源的成本估算不包括在示例中，因为它会因地理位置和团队资历的不同而有很大差异:

![Figure 1.6 – A sample resource allocation section of a DL project
](img/B18522_01_06.jpg)

图 1.6–DL 项目的资源分配部分示例

在我们进入下一步之前，我们想提一下，留出一部分资源作为备份是很重要的，以防里程碑需要的资源超过已经分配的资源。

## 定义时间线

现在我们知道了可用的资源，我们应该能够为项目构建一个时间表。在这一步，团队需要讨论完成每一步需要多长时间。值得一提的是，事情并不总是按计划进行。在整个项目中，会有许多困难会延迟最终产品的交付。

因此，在时间线中包含缓冲区是许多组织的常见做法。每个利益相关者都同意时间表是很重要的。如果有人认为不合理，需要立即进行调整。*图 1.7* 是一个示例甘特图，其中显示了*图 1.6* 中信息最可能的估计时间表:

![Figure 1.7 – A sample Gantt chart describing the timeline
](img/B18522_01_07.jpg)

图 1.7–描述时间表的甘特图示例

值得一提的是图表还可以用来监控每项任务和整个项目的进度。在这种情况下，可以在每个指示条上附加总结进度的附加注释或可视化效果。

## 管理项目

在项目计划阶段需要讨论的 DL 项目的另一个重要的方面是团队将遵循的更新其他团队成员并确保项目按时交付的过程。在各种项目管理方法中，敏捷非常适合，因为它有助于将工作分成更小的部分，并快速迭代开发周期，直到 FFP 出现。因为 DL 项目通常被认为是高度复杂的，所以在研究、开发和优化阶段的短周期内工作更方便。在每个周期结束时，利益相关者审查结果并调整他们的长期目标。**敏捷方法论**特别适合有经验的个人组成的小团队。在一个典型的环境中，两周的冲刺被认为是最有效的，尤其是当短期目标明确的时候。

在 sprint 会议上，团队回顾上一次 sprint 的目标，并定义下一次 sprint 的目标。还建议召开简短的每日会议，回顾前一天完成的工作，并为第二天做好计划，因为这一过程可以帮助团队快速识别瓶颈，并根据需要调整他们的优先级。此过程常用的工具有**吉拉**、**体式**和**快速底座**。大多数上述工具还支持预算管理、时间表审核、想法管理和资源跟踪。

要记住的事情

a.项目计划应该产生一个剧本，该剧本清楚地描述了项目的目的以及团队将如何一起行动以达到特定的目标状态。

b.项目规划的第一步是定义一个目标及其相应的评估指标。在 DL 项目的情况下，有两种类型的评估度量:与业务相关的度量和基于模型的度量。

c.利益相关者是指能够影响项目或受项目影响的个人或团体。利益相关者可以分为两种类型:内部和外部。

d.项目计划的下一个阶段是任务组织。团队需要确定里程碑、任务以及 LOE 活动，并理解关键路径。

e.对于 DL 项目，有两种主要的资源需要明确的资源分配:人力和计算资源。在资源分配过程中，留出一部分资源作为备用是很重要的。

f.当估计项目的时间表时，它必须在团队中共享，并且每个涉众必须同意该时间表。

g.敏捷方法非常适合管理 DL 项目，因为它有助于将工作分成更小的部分，并快速迭代开发周期。

# 总结

这一章是对我们旅程的介绍。在前两节中，我们已经描述了人工智能在更广阔的人工智能图景中的位置，以及它如何不断地塑造我们的日常生活。关键要点是，DL 由于其独特的模型架构而高度灵活，并且 DL 已经被积极地应用于传统 ML 技术未能展示出显著成就的领域。

然后，我们提供了 DL 项目的高级视图。一般来说，DL 项目可以分为以下几个阶段:项目规划、构建 MVP、构建 FFP、开发和维护，以及项目评估。

本章的主要内容涵盖了 DL 项目中最重要的一步:项目规划。在这一阶段，需要明确定义项目的目的，以及评估标准，每个人都必须对涉众及其各自的角色有充分的了解，最后，参与者需要就任务、里程碑和时间表达成一致。这个阶段的结果是一个格式良好的文档，称为行动手册。在下一章，我们将学习如何为 DL 项目准备数据。

# 延伸阅读

这里有一个参考文献列表，可以帮助你获得更多关于本章相关主题的知识。以下研究论文总结了 DL 的常见使用案例:

*   履历
    *   **乐存等*将基于梯度的学习应用于文档识别*。
    *   *ImageNet:由*邓等人*开发的一个大规模分层图像数据库*。
*   自然语言处理
    *   *一个神经概率语言模型*由 *Bengio 等人*提出。
    *   *Grave 等人*利用深度循环神经网络*进行语音识别*。
*   RL
    *   *弗朗索瓦-拉维特等人*的*深度强化学习的介绍*。
*   生成建模
    *   *生成性对抗网络*由*古德费勒等人*提出。